<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112759168-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'UA-112759168-1');
	</script>
	<!-- end of google analytics -->

	<title>Casino Inc Project Page</title>
	<meta name="description" content="On this page you will find information about my work on Casino Inc." />
	<link rel="shortcut icon" href="favicon.ico">
	
	<!-- social media preview stuffs -->
	<meta property="og:type" content="website" />
	<meta property="og:image" content="Casino Inc" />
	<meta property="og:site_name" content ="VanDenBergGames" />
	<meta property="og:title" content="Casino Inc Project Page" />
	<meta property="og:description" content="On this page you will find information about Matthieu van den Berg his work on Casino Inc." />
	<meta property="og:url" content="https://www.vandenberggames.com/Casino Inc.html" />
	<!-- end of social media preview stuffs -->
	
	<!-- stylesheets -->
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<link rel="stylesheet" type="text/css" href="css/p_reset.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="css/p_style.css" media="screen" />
	<!-- <link rel="stylesheet" type="text/css" href="css/p_redstare.css" media="screen" />
	<!-- end of stylesheets -->
	
</head>

<body>
	<div id="container">
	<div id="header">
		<h1>Casino Inc</h1>
		<h2>Management Simulation game</h2>
		<h2>Solo Graduation Project</h2>
		<h2>AI
		<ul>
			<li>A* pathfinding</li>
			<li>GOAP</li>
			<li>Utility Theory</li>
		</ul></h2>
		<h2>Game play</h2>
		<h2>Design</h2>
	</div>
	<!--//end #headern//-->
	
	<div id="leftColumn">
		<h2>Go directly to:
		<ul>
			<li><a href="index.html">Homepage</a></li>
			<li><a href="#Goals">Project Goals</a></li>
			<li><a href="#Specifications">Specifications</a></li>
			<li><a href="#Planning">Planning</a></li>
			<li><a href="#Tilemap">2D tilemap</a></li>
			<li><a href="#Pathfinding">Pathfinding</a></li>
			<li><a href="#TaskManager">AI Task Manager</a></li>
			<li><a href="#GOAP">GOAP</a></li>
			<li><a href="#Staff">Staff</a></li>
			<li><a href="#Guests">Guests</a></li>
			<li><a href="#Results">Results</a></li>
		</ul></h2>
			<p><br>Casino Inc is a project I did for my graduation on IGAD.<br>
			It is a top-down management simulation game, where the player builds his own casino.<br><br></p>
	</div>
	<!--//end #leftColumn//-->
    
	<div id="dataColumn">
		<blockquote><br>
		<h2>Data:</h2>
		<p>
		<ul>
		<li style="font-size:1.1em;">Platform</li>
		<ul>
			<li>PC</li>
		</ul>
		<li style="font-size:1.1em;">Genre</li>
		<ul>
			<li>Management</li>
			<li>Simulation</li>
		</ul>
		<li style="font-size:1.1em;">Time</li>
		<ul>
			<li>January 2019 - June 2019</li>
		</ul>
		<li style="font-size:1.1em;">Team</li>
		<ul>
			<li>just myself</li>
		</ul>
		<li style="font-size:1.1em;">Engine</li>
		<ul>
			<li>Unreal</li>
		</ul>
		</ul>
		</p>
		<br></blockquote>
	</div>
	<!--//end #dataColumn//-->

	<div id="centerColumn">
		<h2>General</h2>
		<p>Casino Inc is a project I worked on for 6 months as graduation project for IGAD.<br>
		<br>
		It is a Game where you build and manage your own casino.<br>
		The player starts from almost nothing, and has to build up their own casino to a place where they are making as much money as they can.<br>
		<br>
		This project has been heavily inspired by games as <a href="https://store.steampowered.com/app/233450/Prison_Architect/" target="steam">Prison Architect</a>, <a href="https://store.steampowered.com/app/521150/Another_Brick_in_The_Mall/" target="steam">Another Brick In The Mall</a>, and <a href="https://store.steampowered.com/app/672630/Academia__School_Simulator/"  target="steam">Academia: School Simulator</a>.<br>
		Each of these games are top-down tile based management simulations of their respective theme's.<br>
		<br>
		A 30 minute powerpoint presentation (with voice over) that I used for the defence can be downloaded using the following links: <a href="Documents\DefencePresentation.pptx" download>powerpoint</a>, <a href="Documents\DefencePresentation.docx" download>script</a><br>
		<br>
		Additionally, the full source can be found on github using <a href="https://github.com/matthieu1345/CasinoInc/tree/master/Casino_Inc" target="github">this link</a>.<br>
		And the latest builds can be found <a href="https://github.com/matthieu1345/CasinoInc/releases" target="releases">here</a>.
		</p>
		<!-- end of General -->
		
		<h2 id="Goals">Project Goals</h2>
		<p>The goals I've set myself for this project where to make a playable game, and get experience with more advanced AI systems.<br>
		Both of these goals where to add a new piece of work to my portfolio, and to give me more programming experience.<br>
		For the AI systems I wanted to use a Goal Orientated Action Planner (GOAP) as I've not used that before, and it's often used in games I like to play.</p>
		<!-- end of project goals -->
		
		<img src="images/CasinoInc/PreviewPicture.jpg" alt="Preview" title="Preview" style="width:400px; float:left; border-style: solid; border-width: 1px; margin-top:4em"><br>
		<h2 id="Specifications">Specifications</h2>
		<p>The specifications for the game I made are the following:
		<ul>
		<li>The theme is a top down tile-based build your own casino. Where the player get’s freedom to build in whatever way they want.</li>
		<li>The main gameplay loop is fairly simple:
		<ol>
			<li>The player spends the money they have to build/expand their casino.</li>
			<li>The casino is being build by builder AI’s in the way the player has specified in step 1.</li>
			<li>Guests come to play games in the casino, making the player money to return to step 1.</li>
		</ol>
		</li>
		<li>Motivation for the player are creativity and bigger is better.</li>
		</ul></p>
		<!-- end of Specifications -->
		
		<h2 id="Planning">Planning</h2>
		<p>With this size a project, I needed to plan a lot. I did this by deviding the project in the following 10 milestones:
		<img src="images/CasinoInc/Milestones.jpg" alt="Milestones" title="Milestones" style="width:400px; float:right; border-style: solid; border-width: 1px; margin-top:3em"><br>
		<ol type="1">
		<li>2D tile map</li>
		<li>Basic player interaction</li>
		<li>Pathfinding</li>
		<li>AI task manager</li>
		<li>GOAP planner</li>
		<li>Casino management</li>
		<li>Builders</li>
		<li>Poker, Blackjack, and Slot Machines</li>
		<li>Guests</li>
		<li>Dealers</li>
		</ol><br>
		Each of these milestones where planned to be between 1 and 3 weeks of work, and to be in such a order that they would build on one another.<br>
		Expansion on the planning has been done using the scrum boards of <a href="https://hacknplan.com/" target="hacknplan">HackNPlan</a>.<br>
		Using the planning tools given by HackNPlan I scheduled all different milestones and smaller tasks within these milestones.
		</p>
		<!-- end of Planning -->
		
		<img src="images/CasinoInc/Tilemap.jpg" alt="Tilemap" title="Tilemap" style="width:300px; float:right;">
		<h2 id="Tilemap">2D tilemap</h2>
		<p style="padding-bottom:3em">The tilemap is the part of the game that shows everything, as the name implies it’s a map made of a grid of tiles.<br>
		I’ve used this as this is the style that the preview games use to, and it’s a staple of a lot of different other management games.<br>
		For this I use a combination of Unreals build in tilemap, and my own made tilemap.<br>
		This combination is made because the unreal tilemap is purely cosmetic, so only draws the tiles, but for this game I need separate behaviours for different type of tiles.<br>
		The system I made myself to give different tiles different behaviours consists of a list of actors with the bare minimum, which have all information about what type of tile it is, and some shared info like if its walkable and which sprite to use for it. With added on top of this are actor components for the tiles that need additional behavior.
		</p>
		<!-- end of 2D tilemap -->
		
		<video width="50%" height="auto" style="float:left; margin: 0 20px 10px 0;" controls><source src="video/CasinoInc_Pathfinding.mp4" type="video/mp4">Your browser does not support the video tag.</video>
		<h2 id="Pathfinding">Pathfinding</h2>
		<p>For Pathfinding of the characters walking around I've implemented a <a href="https://en.wikipedia.org/wiki/A*_search_algorithm" target="wiki">A* algorithm</a>, which is a widely used best-first search.<br>
		The combination between this algorithm and the tilemap was straight forward, and it uses the tiles as nodes.<br>
		To make it that the game still has a normal fps, I needed to make this pathfinding multi-threaded which is not the most easy thing to do in unreal engine.<br>
		The biggest problem for this is that there's barely any documentation on this, and the biggest sources are outdated and incorrect.<br>
		As a thread safe way of returning the found paths to the main thread, I first got to the Delegate's that unreal has build in, that according to multiple sources are thread safe, but ended up not being safe.<br>
		Instead of this I needed to use a TQueue, which is a queue that is thread safe, as long as you only take out of it from the main thread, but you're still allowed to put things onto it from any sub thread you want.<br>
		Source code for the pathfinding can be found at <a href="https://github.com/matthieu1345/CasinoInc/tree/master/Casino_Inc/Source/Casino_Inc/PathFinding" target="Gist">this link</a>.
		</p>
		<!-- end of Pathfinding -->
		
		<img src="images/CasinoInc/TaskManager.jpg" alt="TaskManager" title="TaskManager" style="width:300px; float:right; margin-top:2em">
		<h2 id="TaskManager">AI Task Manager</h2>
		<p>To keep track of which tasks the player gives to the AI’s, there’s also the need of a AI Task Manager.<br>
		This consists of a actor with as main function 2 hybrid First in first out queue’s, with the addition that it will take the first task allowed for the AI in question, so not always the very first task.<br>
		Example of this is when there’s a queue of building 2 walls, cleaning trash, building another wall, and working at a poker table.<br>
		The returned task for a dealer will be the work at a table task and not the build wall task, because he can’t do any of the others.<br>
		Another thing that I wanted to have added to the task queue is a way to take tasks to the front of the queue to prioritize them, this was done by simply adding a 2nd queue which will be worked in a similar way, but always checked before the normal queue.
		</p>
		<!-- end of AI Task Manager -->
		
		<video width="50%" height="auto" style="float:left; margin: 3em 20px 1em 0;" controls><source src="video/CasinoInc_GOAP.mp4" type="video/mp4">Your browser does not support the video tag.</video>
		<h2 id="GOAP">GOAP</h2>
		<p>For the AI decision making I wanted to use a system I’ve not used before, which is a Goal Oriented Action Planner, or GOAP for short.<br>
		GOAP is a system where the AI plans a set of actions that will take it from its current state till a specified goal state.<br>
		For example, a builder wanting to build a wall would need building tools, and building materials.<br>
		An AI using GOAP will then be able to think out itself that it needs to pickup these tools from a tool storage, and materials from a storage room before it can go to the build location.<br>
		But if the AI already has tools, it creates a plan of action with only getting materials before going to the build task.<br>
		For this action planning I’ve used an algorithm very close to A star pathfinding, but instead of location nodes, it’s using the actions as nodes.<br>
		The start and end of the path are the states that the AI needs/has, and using the difference between this as heuristics you can create a path from action to action between the goal and start.
		</p>
		<!-- end of GOAP -->
		
		<h2 id="Staff">Staff</h2>
		<p>The staff is currently made up of builders and dealers, but written in such a way that its easily expandable to include other jobs like janitors, guards, or waiters.<br>
		They do their respective tasks using the before explained manager and GOAP systems.<br>
		The player has to hire each person in staff, and is in full control to give them different working times and lenghts.<br>
		</p>
		<!-- end of Staff -->
		
		<h2 id="Guests">Guests using Utility Theory</h2>
		<p>The main element to make the game a simulation, The guests walk around the casino playing different games that make the player money.<br>
		They're setup with a Utility Theory setup to decide on what they want to do. The way this is setup is that each type of interactable has their own score, with a calculation based on the current stats of the guest to influence this score further.<br>
		When each score is calculated, the results are used as a weighted chance for what the guest is actually going to do.<br>
		This way, the behaviour of the guests is expandable, but keeps being very light weighted, and won't impact the games performace much.
		</p>
		<!-- end of Guests -->
		
		<h2 id="Results">Results</h2>
		<p>This all has come together in a small game I’ve been calling Casino Inc.<br>
		I am very happy with how it all ended up working and looking, and think I’ve made a very fun little game. Which also works very well.<br>
		The player is able to fully build and run their own casino, and watch the guests go around it playing the games.<br>
		This also gives a good basis which can still be expanded massively, for example with the guests needing food and drinks, more games, and more types of AIs such as janitors to keep everything clean.<br>
		All with all, I am very proud of what I’ve managed to do in the alloted time, and how it all went without very big disappointments.
		</p>
		<!-- end of Results -->
		
		<blockquote>
		<p>A 30 minute powerpoint presentation (with voice over) that I used for the defence can be downloaded using the following links: <a href="Documents\DefencePresentation.pptx" download>powerpoint</a>, <a href="Documents\DefencePresentation.docx" download>script</a><br>
		<br>
		Additionally, the full source can be found on github using <a href="https://github.com/matthieu1345/CasinoInc/tree/master/Casino_Inc" target="github">this link</a>.<br>
		And the latest builds can be found <a href="https://github.com/matthieu1345/CasinoInc/releases" target="releases">here</a>.</p>
		</blockquote>
	</div>
	<!--//end #centerColumn//-->
	
	<div id="footer"> <a href="#">Top</a> | <a target="_blank" href="index.html#fh5co-pricing" title="Homepage">Projects</a> | <a target="_blank" href="index.html" title="Homepage">Home</a>
		</p>
	</div>
	<!--//end #footer//-->
	
	</div>
	<!--//end #container//-->
	
</body>

</html>
